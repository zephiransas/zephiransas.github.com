---
layout: post
title: "Photo Leafをちょっとリニューアルしました"
date: 2014-02-06 15:51
comments: true
categories: 
---

前から気になっていた[Photo Leaf](http://www.photo-leaf.com)のフォトブック作成画面のリニューアルをしました。

![フォトブック編集画面](/images/20140206/photoleaf.png)

画面の中央部分にフォトブックのページ一覧。画面の一番下に、flickrの写真一覧を表示するようにしました。今までとは、真逆のレイアウトになっています。

- flickrの写真一覧は左右のスライダーでページを移動できます。
- ちなみに、スクロールする度にPhotoStreamの写真を逐次読み込む仕様になっています。
- flickrの写真は、クリックすることで大きめの画像を画面中央に表示できます。
- Set内の写真のみを一覧に表示した場合は「Setを選ぶ」ボタンを押すことで、Setを選択できます。

写真選択は今まで通り、ドラッグ&ドロップでフォトブックの各ページに写真を置いていきます。

flickrに写真を保存していて、フォトブックを作ってみたい方は是非ご利用ください。

## 技術的なこと

ついでといってはなんですが、裏側もちょこちょこ修正しています。

- unicornを使うようにした。多少はパフォーマンスがあがってる（はず）
- [wercker](http://wercker.com/)を使って、masterにpushするだけで、あとは自動でテスト->デプロイまでできるようにした。
- 利用規約のページなど、他とは微妙に違うページは別layoutにしてたのを、content_forを使ってapplication.html.erbに一本化した。
- rpsecのテストにshoulda matcherを導入した。

といったとこです。**特にwerckerは素晴らしい。** werckerのお陰で、本番環境とステージング環境をあまり考えることなく、テストからデプロイまでやってくれるのは、非常に楽でした。

このあたりのwerckerの使い方も、後ほどまとめてみようかと思っています。